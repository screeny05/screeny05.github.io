{"version":3,"sources":["main.js"],"names":["$","ready","fn","document","readyState","addEventListener","jsonp","url","options","arguments","length","undefined","useProxy","callbackParam","fnName","Math","floor","random","window","encodeURIComponent","indexOf","$head","getElementsByTagName","$script","createElement","type","src","data","removeChild","appendChild","stripHtml","html","divElement","innerHTML","textContent","innerText","renderListElement","title","description","listElement","classList","add","titleElement","href","descriptionElement","$codepenList","querySelector","$lastfmList","LIST_LIMIT","slice","forEach","pen","details","link","weeklytrackchart","track","name","artist"],"mappings":"AAAA,YAAA,IAAIA,IACAC,MAAA,SAAMC,GACF,MAA2B,YAAxBC,SAASC,WACDF,QAEXC,UAASE,iBAAiB,mBAAoBH,IAGlDI,MAAA,SAAMC,EAAKL,GAEP,GAFWM,GAAAC,UAAAC,QAAA,GAAAC,SAAAF,UAAA,MAAUA,UAAA,EACrBD,GAAQI,SAAWJ,EAAQI,YAAa,GAAO,GAAO,EACtDJ,EAAQK,cAAgBL,EAAQK,eAAiB,UAEjD,IAAIC,GAAS,KAAOC,KAAKC,MAAsB,IAAhBD,KAAKE,SAGhCV,GADDC,EAAQI,SACP,+BAAqCM,OAAOC,mBAAmBZ,GAA1B,aAA2CO,GAEpD,KAArBP,EAAIa,QAAQ,KAAcb,EAAM,IAAMA,EAAM,KAAOC,EAAQK,cAAgB,IAAMC,CAG5F,IAAIO,GAAQlB,SAASmB,qBAAqB,QAAQ,GAC9CC,EAAUpB,SAASqB,cAAc,SAYrC,OAXAD,GAAQE,KAAM,kBACdF,EAAQG,IAAMnB,EAEdW,OAAOJ,GAAU,SAAAa,GACbzB,EAAGyB,SACIT,QAAOJ,GACdO,EAAMO,YAAYL,GAClBA,EAAU,MAGdF,EAAMQ,YAAYN,GACXT,GAGXgB,UAAA,SAAUC,GACN,GAAIC,GAAa7B,SAASqB,cAAc,MAExC,OADAQ,GAAWC,UAAYF,EAChBC,EAAWE,aAAeF,EAAWG,WAAa,KAI7DC,kBAAoB,SAASC,EAAOC,EAAa/B,GACjD,GAAIgC,GAAcpC,SAASqB,cAAc,KACzCe,GAAYC,UAAUC,IAAI,eAE1B,IAAIC,GAAevC,SAASqB,cAAc,IAC1CkB,GAAaF,UAAUC,IAAI,iBAC3BC,EAAaC,KAAOpC,EACpBmC,EAAaR,YAAcG,CAE3B,IAAIO,GAAqBzC,SAASqB,cAAc,OAOhD,OANAoB,GAAmBJ,UAAUC,IAAI,uBACjCG,EAAmBV,YAAclC,EAAE8B,UAAUQ,GAE7CC,EAAYV,YAAYa,GACxBH,EAAYV,YAAYe,GAEjBL,GAGLM,aAAe1C,SAAS2C,cAAc,sBACtCC,YAAe5C,SAAS2C,cAAc,qBACtCE,WAAa,CAEnBhD,GAAEC,MAAM,WACJD,EAAEM,MAAM,4CAA6C,SAAAqB,GAGjD,MAHyDA,GAAKA,KAAKsB,MAAM,EAAGD,YAAYE,QAAQ,SAAAC,GAChGN,aAAahB,YAAYO,kBAAkBe,EAAId,MAAOc,EAAIC,QAAUD,EAAIC,QAAU,IAAKD,EAAIE,WAE3FzC,UAAU,IAEdZ,EAAEM,MAAM,oJAAqJ,SAAAqB,GAKzJ,MALiKA,GAAK2B,iBAAiBC,MAAMN,MAAM,EAAGD,YAAYE,QAAQ,SAAAK,GAC1NR,YAAYlB,YAAYO,kBAAkBmB,EAAMC,KAAM,KAAOD,EAAME,OAAO,SAAUF,EAAMhD","file":"all.js","sourcesContent":["let $ = {\n    ready(fn){\n        if(document.readyState === 'loading'){\n            return fn();\n        }\n        document.addEventListener('DOMContentLoaded', fn);\n    },\n\n    jsonp(url, fn, options = {}){\n        options.useProxy = options.useProxy === true ? true : false;\n        options.callbackParam = options.callbackParam || 'callback';\n\n        let fnName = 'cb' + Math.floor(Math.random() * 1000);\n\n        if(options.useProxy){\n            url = `https://jsonp.afeld.me/?url=${window.encodeURIComponent(url)}&callback=${fnName}`;\n        } else {\n            url = (url.indexOf('?') === -1 ? url + '?' : url + '&') + options.callbackParam + '=' + fnName;\n        }\n\n        let $head = document.getElementsByTagName('head')[0];\n        let $script = document.createElement('script');\n        $script.type= 'text/javascript';\n        $script.src = url;\n\n        window[fnName] = data => {\n            fn(data);\n            delete window[fnName];\n            $head.removeChild($script);\n            $script = null;\n        };\n\n        $head.appendChild($script);\n        return fnName;\n    },\n\n    stripHtml(html){\n        let divElement = document.createElement('div');\n        divElement.innerHTML = html;\n        return divElement.textContent || divElement.innerText || \"\";\n    }\n};\n\nlet renderListElement = function(title, description, url){\n    let listElement = document.createElement('li');\n    listElement.classList.add('list-element');\n\n    let titleElement = document.createElement('a');\n    titleElement.classList.add('element-title');\n    titleElement.href = url;\n    titleElement.textContent = title;\n\n    let descriptionElement = document.createElement('span');\n    descriptionElement.classList.add('element-description');\n    descriptionElement.textContent = $.stripHtml(description);\n\n    listElement.appendChild(titleElement);\n    listElement.appendChild(descriptionElement);\n\n    return listElement;\n};\n\nconst $codepenList = document.querySelector('.js-target-codepen');\nconst $lastfmList  = document.querySelector('.js-target-lastfm');\nconst LIST_LIMIT = 6;\n\n$.ready(function(){\n    $.jsonp('http://cpv2api.com/pens/popular/screeny05', data => data.data.slice(0, LIST_LIMIT).forEach(pen => {\n        $codepenList.appendChild(renderListElement(pen.title, pen.details ? pen.details : '—', pen.link));\n    }), {\n        useProxy: true\n    });\n    $.jsonp('https://ws.audioscrobbler.com/2.0/?format=json&callback=_&api_key=8ec8e910eba21826608967bcdefb2343&method=user.getWeeklyTrackChart&user=screeny05', data => data.weeklytrackchart.track.slice(0, LIST_LIMIT).forEach(track => {\n        $lastfmList.appendChild(renderListElement(track.name, '— ' + track.artist['#text'], track.url));\n    }));\n});\n"],"sourceRoot":"/source/"}