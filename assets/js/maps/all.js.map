{"version":3,"sources":["main.js"],"names":["$","ready","fn","document","readyState","addEventListener","jsonp","url","options","arguments","length","undefined","useProxy","callbackParam","fnName","Math","floor","random","window","encodeURIComponent","indexOf","$head","getElementsByTagName","$script","createElement","type","src","data","removeChild","appendChild","removeChildren","el","firstChild","stripHtml","html","divElement","innerHTML","textContent","innerText","renderListElement","title","description","listElement","classList","add","titleElement","href","descriptionElement","$codepenList","querySelector","$lastfmList","LIST_LIMIT","slice","forEach","pen","setTimeout","details","link","recenttracks","track","name","artist"],"mappings":"AAAA,YAAA,IAAIA,IACAC,MAAA,SAAMC,GACF,MAA2B,YAAxBC,SAASC,WACDF,QAEXC,UAASE,iBAAiB,mBAAoBH,IAGlDI,MAAA,SAAMC,EAAKL,GAEP,GAFWM,GAAAC,UAAAC,QAAA,GAAAC,SAAAF,UAAA,MAAUA,UAAA,EACrBD,GAAQI,SAAWJ,EAAQI,YAAa,GAAO,GAAO,EACtDJ,EAAQK,cAAgBL,EAAQK,eAAiB,UAEjD,IAAIC,GAAS,KAAOC,KAAKC,MAAsB,IAAhBD,KAAKE,SAGhCV,GADDC,EAAQI,SACP,+BAAqCM,OAAOC,mBAAmBZ,GAA1B,aAA2CO,GAEpD,KAArBP,EAAIa,QAAQ,KAAcb,EAAM,IAAMA,EAAM,KAAOC,EAAQK,cAAgB,IAAMC,CAG5F,IAAIO,GAAQlB,SAASmB,qBAAqB,QAAQ,GAC9CC,EAAUpB,SAASqB,cAAc,SAYrC,OAXAD,GAAQE,KAAM,kBACdF,EAAQG,IAAMnB,EAEdW,OAAOJ,GAAU,SAAAa,GACbzB,EAAGyB,SACIT,QAAOJ,GACdO,EAAMO,YAAYL,GAClBA,EAAU,MAGdF,EAAMQ,YAAYN,GACXT,GAGXgB,eAAA,SAAeC,GACX,KAAMA,EAAGC,YACLD,EAAGH,YAAYG,EAAGC,aAI1BC,UAAA,SAAUC,GACN,GAAIC,GAAahC,SAASqB,cAAc,MAExC,OADAW,GAAWC,UAAYF,EAChBC,EAAWE,aAAeF,EAAWG,WAAa,KAI7DC,kBAAoB,SAASC,EAAOC,EAAalC,GACjD,GAAImC,GAAcvC,SAASqB,cAAc,KACzCkB,GAAYC,UAAUC,IAAI,eAE1B,IAAIC,GAAe1C,SAASqB,cAAc,IAC1CqB,GAAaF,UAAUC,IAAI,iBAC3BC,EAAaC,KAAOvC,EACpBsC,EAAaR,YAAcG,CAE3B,IAAIO,GAAqB5C,SAASqB,cAAc,OAOhD,OANAuB,GAAmBJ,UAAUC,IAAI,uBACjCG,EAAmBV,YAAcrC,EAAEiC,UAAUQ,GAE7CC,EAAYb,YAAYgB,GACxBH,EAAYb,YAAYkB,GAEjBL,GAGLM,aAAe7C,SAAS8C,cAAc,sBACtCC,YAAe/C,SAAS8C,cAAc,qBACtCE,WAAa,CAEnBnD,GAAEC,MAAM,WACJD,EAAEM,MAAM,4CAA6C,SAAAqB,GAEjD,MAFyDA,GAAKA,KAAKyB,MAAM,EAAGD,YAAYE,QAAQ,SAAAC,GAChGtD,EAAE8B,eAAekB,cACjBO,WAAW,WACPP,aAAanB,YAAYU,kBAAkBe,EAAId,MAAOc,EAAIE,QAAUF,EAAIE,QAAU,IAAKF,EAAIG,QAC5F,OAEH7C,UAAU,IAEdZ,EAAEM,MAAM,gJAAiJ,SAAAqB,GAIrJ,MAJ6JA,GAAK+B,aAAaC,MAAMP,MAAM,EAAGD,YAAYE,QAAQ,SAAAM,GAClN3D,EAAE8B,eAAeoB,aACjBK,WAAW,WACPL,YAAYrB,YAAYU,kBAAkBoB,EAAMC,KAAMD,EAAME,OAAO,SAAUF,EAAMpD,OACpF","file":"all.js","sourcesContent":["let $ = {\n    ready(fn){\n        if(document.readyState === 'loading'){\n            return fn();\n        }\n        document.addEventListener('DOMContentLoaded', fn);\n    },\n\n    jsonp(url, fn, options = {}){\n        options.useProxy = options.useProxy === true ? true : false;\n        options.callbackParam = options.callbackParam || 'callback';\n\n        let fnName = 'cb' + Math.floor(Math.random() * 1000);\n\n        if(options.useProxy){\n            url = `https://jsonp.afeld.me/?url=${window.encodeURIComponent(url)}&callback=${fnName}`;\n        } else {\n            url = (url.indexOf('?') === -1 ? url + '?' : url + '&') + options.callbackParam + '=' + fnName;\n        }\n\n        let $head = document.getElementsByTagName('head')[0];\n        let $script = document.createElement('script');\n        $script.type= 'text/javascript';\n        $script.src = url;\n\n        window[fnName] = data => {\n            fn(data);\n            delete window[fnName];\n            $head.removeChild($script);\n            $script = null;\n        };\n\n        $head.appendChild($script);\n        return fnName;\n    },\n\n    removeChildren(el){\n        while(el.firstChild){\n            el.removeChild(el.firstChild);\n        }\n    },\n\n    stripHtml(html){\n        let divElement = document.createElement('div');\n        divElement.innerHTML = html;\n        return divElement.textContent || divElement.innerText || \"\";\n    }\n};\n\nlet renderListElement = function(title, description, url){\n    let listElement = document.createElement('li');\n    listElement.classList.add('list-element');\n\n    let titleElement = document.createElement('a');\n    titleElement.classList.add('element-title');\n    titleElement.href = url;\n    titleElement.textContent = title;\n\n    let descriptionElement = document.createElement('span');\n    descriptionElement.classList.add('element-description');\n    descriptionElement.textContent = $.stripHtml(description);\n\n    listElement.appendChild(titleElement);\n    listElement.appendChild(descriptionElement);\n\n    return listElement;\n};\n\nconst $codepenList = document.querySelector('.js-target-codepen');\nconst $lastfmList  = document.querySelector('.js-target-lastfm');\nconst LIST_LIMIT = 6;\n\n$.ready(function(){\n    $.jsonp('http://cpv2api.com/pens/popular/screeny05', data => data.data.slice(0, LIST_LIMIT).forEach(pen => {\n        $.removeChildren($codepenList);\n        setTimeout(() => {\n            $codepenList.appendChild(renderListElement(pen.title, pen.details ? pen.details : 'â€”', pen.link));\n        }, 0);\n    }), {\n        useProxy: true\n    });\n    $.jsonp('https://ws.audioscrobbler.com/2.0/?format=json&callback=_&api_key=8ec8e910eba21826608967bcdefb2343&method=user.getRecentTracks&user=screeny05', data => data.recenttracks.track.slice(0, LIST_LIMIT).forEach(track => {\n        $.removeChildren($lastfmList);\n        setTimeout(() => {\n            $lastfmList.appendChild(renderListElement(track.name, track.artist['#text'], track.url));\n        }, 0);\n    }));\n});\n"],"sourceRoot":"/source/"}